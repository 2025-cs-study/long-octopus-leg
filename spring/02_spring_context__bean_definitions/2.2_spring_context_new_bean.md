## 2.2 ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì— ìƒˆë¡œìš´ ë¹ˆ ì¶”ê°€

- ë¹ˆì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•
    - `@Bean` ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš©
    - ìŠ¤í…Œë ˆì˜¤íƒ€ì…(stereotype) ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš©
    - í”„ë¡œê·¸ë˜ë° ë°©ì‹

#### ê¸°ë³¸ í´ë˜ìŠ¤ ì •ì˜

```java
package main;

public class Parrot {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

```java
package main;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class Main {

    public static void main(String[] args) {
        var context = new AnnotationConfigApplicationContext();
        Parrot p = new Parrot();
    }
}
```

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
         ...>
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.example</groupId>
    <artifactId>sq-ch2-ex1</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>6.1.6</version>
        </dependency>
    </dependencies>
</project>
```

### 2.2.1 `@Bean` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì— ë¹ˆ ì¶”ê°€

- ìŠ¤í”„ë§ì—ì„œ ë¹ˆì„ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ì´ìœ ëŠ” ìŠ¤í”„ë§ì´ ë¹ˆ ì¼ë¶€ì¸ ê°ì²´ë§Œ ê´€ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸.
- **ë‹¨ê³„**
    1. êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ì •ì˜. ìŠ¤í”„ë§ì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ì„±í•˜ëŠ” ë° ì‚¬ìš©í•  êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ì •ì˜í•¨.
    2. ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€í•˜ë ¤ëŠ” ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œë¥¼ êµ¬ì„± í´ë˜ìŠ¤ì— ì¶”ê°€í•˜ê³  @Bean ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ë©”ì„œë“œì— ì£¼ì„ì„ ì¶”ê°€í•¨.
    3. ìŠ¤í”„ë§ì´ êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê²Œ í•¨. êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ í”„ë ˆì„ì›Œí¬ êµ¬ì„±ì„ ì‘ì„±í•¨.

```java
// êµ¬ì„± í´ë˜ìŠ¤
package config;

import main.Parrot;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration	// ì´ í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ êµ¬ì„± í´ë˜ìŠ¤ë¡œ ì •ì˜í•¨
public class ProjectConfig {

    @Bean	// ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ê°€ ì´ˆê¸°í™”ë  ë•Œ ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  ë°˜í™˜ëœ ê°’ì„ ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€í•˜ë¼ê³  ì§€ì‹œí•¨
    Parrot parrot() {
        var p = new Parrot();
        p.setName("Koko");
        return p;
    }

    @Bean
    String hello() {
        return "Hello";
    }

    @Bean
    Integer ten() {
        return 10;
    }
}
```

```java
// ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™”
package main;

import config.ProjectConfig;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class Main {

    public static void main(String[] args) {
        var context = new AnnotationConfigApplicationContext(ProjectConfig.class);	// ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œ êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ì†¡í•˜ì—¬ ìŠ¤í”„ë§ì´ ì´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì§€ì‹œí•¨

        Parrot p = context.getBean(Parrot.class);	// ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì—ì„œ Parrot íƒ€ì…ì˜ ë¹ˆ ì°¸ì¡°ë¥¼ ê°€ì ¸ì˜´

        System.out.println(p.getName());

        String s = context.getBean(String.class);

        System.out.println(s);

        Integer n = context.getBean(Integer.class);

        System.out.println(n);
    }
}
```

```java
package main;

public class Parrot {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

### 2.2.2 ìŠ¤í…Œë ˆì˜¤íƒ€ì… ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì— ë¹ˆ ì¶”

- ìŠ¤í…Œë ˆì˜¤íƒ€ì… ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€í•´ì•¼ í•  ì¸ìŠ¤í„´ìŠ¤ì˜ í´ë˜ìŠ¤ ìœ„ì— @Component ì• ë„ˆí…Œì´ì…˜ì„ ì¶”ê°€í•´ì•¼ í•¨.
- ìŠ¤í…Œë ˆì˜¤íƒ€ì… ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ì§€ì •ëœ í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìœ„ì¹˜ë¥¼ ìŠ¤í”„ë§ì— ì•Œë ¤ì£¼ëŠ” êµ¬ì„±(configuration) í´ë˜ìŠ¤ê°€ í•„ìš”.

- **ê³¼ì •**
    1. @Component ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ ìŠ¤í”„ë§ì´ í•´ë‹¹ ì»¨í…ìŠ¤íŠ¸ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¶”ê°€í•  í´ë˜ìŠ¤ë¥¼ í‘œì‹œí•¨.
    2. êµ¬ì„± í´ë˜ìŠ¤ ìœ„ì— @ComponentScan ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ í‘œì‹œí•œ í´ë˜ìŠ¤ë¥¼ ì–´ë””ì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ”ì§€ ìŠ¤í”„ë§ì— ì§€ì‹œí•¨.

```java
package main;

import org.springframework.stereotype.Component;

@Component // ìŠ¤í”„ë§ì€ ì´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€í•¨
public class Parrot {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

```java
package config;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan(basePackages = "main")	// ìŠ¤í”„ë§ì— ìŠ¤í…Œë ˆì˜¤íƒ€ì… ì• ë„ˆí…Œì´ì…˜ì´ ì§€ì •ëœ  í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤Œ
public class ProjectConfig {

}
```

```java
package main;

import config.ProjectConfig;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class Main {

    public static void main(String[] args) {
        var context = new AnnotationConfigApplicationContext(ProjectConfig.class);

        Parrot p = context.getBean(Parrot.class);

        System.out.println(p);
        System.out.println(p.getName());
    }
}
```

| `@Bean` ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš© | ğŸ‘‘ ìŠ¤í…Œë ˆì˜¤íƒ€ì… ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš© |
|---|---|
| ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ì „ ì œì–´ ê°€ëŠ¥ | í”„ë ˆì„ì›Œí¬ê°€ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„ ì œì–´ ê°€ëŠ¥ |
| ë™ì¼ íƒ€ì… ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€ ê°€ëŠ¥ | ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ë§Œ ì¶”ê°€ ê°€ëŠ¥ |
| ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°ì²´ë„ ì¶”ê°€ ê°€ëŠ¥ | ì•± ë‚´ë¶€ í´ë˜ìŠ¤ë§Œ ê°€ëŠ¥ |
| ìƒìš©êµ¬ ì½”ë“œ ë§ìŒ | ìƒìš©êµ¬ ì½”ë“œ ì—†ìŒ |

### 2.2.3 í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì— ë¹ˆ ì¶”ê°€

- ì¡°ê±´ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë¹ˆì„ ë“±ë¡í•¨.
- `registerBean()` ì‚¬ìš©
- í•„ìš” ì‹œ `Supplier` ì‚¬ìš© ê°€ëŠ¥

```java
package main;

import config.ProjectConfig;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import java.util.function.Supplier;

public class Main {

    public static void main(String[] args) {
        var context = new AnnotationConfigApplicationContext(ProjectConfig.class);

        Parrot x = new Parrot();
        x.setName("Kiki");

        Supplier<Parrot> parrotSupplier = () -> x;

        context.registerBean("parrot1",
                Parrot.class,
                parrotSupplier,
                bc -> bc.setPrimary(true));

        Parrot p = context.getBean(Parrot.class);
        System.out.println(p.getName());
    }
}
```

```java
package main;

public class Parrot {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

```java
package config;

import org.springframework.context.annotation.Configuration;

@Configuration
public class ProjectConfig {
}
```

## â‰ï¸ì˜ˆìƒ ì§ˆë¬¸

1. ìŠ¤í”„ë§ì—ì„œ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•„ëŠ”ëŒ€ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”.
2. ìŠ¤í”„ë§ì—ì„œ ìŠ¤í…Œë ˆì˜¤íƒ€ì… ì• ë„ˆí…Œì´ì…˜ì—ëŠ” ì–´ë–¤ ê²ƒë“¤ì´ ìˆëŠ”ì§€ ì„¤ëª…í•´ì£¼ì„¸ìš”.
3. ë¹ˆ ì´ë¦„ ì¶©ëŒì´ ë°œìƒí–ˆì„ ë•Œ í•´ê²° ë°©ë²•ì— ëŒ€í•´ì„œ ì„¤ëª…í•´ì£¼ì„¸ìš”. 
4. ë™ì ìœ¼ë¡œ ë¹ˆì„ ë“±ë¡í•  ê²½ìš° ìƒê¸¸ ìˆ˜ ìˆëŠ” ë¬¸ì œì ì— ëŒ€í•´ì„œ ì„¤ëª…í•´ì£¼ì„¸ìš”.

&nbsp;

â€» ìì„¸í•œ ë‚´ìš©ì€ [ë¸”ë¡œê·¸](https://mandusitstudy.tistory.com/404)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.
