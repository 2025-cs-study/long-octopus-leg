## 12.3 ë°ì´í„° ì†ŒìŠ¤ êµ¬ì„±ì„ ì‚¬ìš©ì ì •ì˜
- H2 ë°ì´í„°ë² ì´ìŠ¤ ëŒ€ì‹  MySQL ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½

### 12.3.1 ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œí¼í‹° íŒŒì¼ì—ì„œ ë°ì´í„° ì†ŒìŠ¤ ì •ì˜
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ MySQL DBMSì— ì—°ê²°
##### build.gradleì— MySQL JDBC ë“œë¼ì´ë²„ ì˜ì¡´ì„± ì¶”ê°€
```groovy
implementation 'org.springframework.boot:spring-boot-starter-jdbc'
implementation 'org.springframework.boot:spring-boot-starter-web'
runtimeOnly 'com.mysql:mysql-connector-j'
```
##### application.properties íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì»¤ë„¥ì…˜ í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€
```yml
spring.datasource.url=jdbc:mysql://localhost/spring_textbook
spring.datasource.username=root
spring.datasource.password=1234
spring.sql.init.mode=always
```
- `spring.datasource.url` í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ìœ„ì¹˜ë¥¼ ì •ì˜
- `spring.datasource.username/password` í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•˜ì—¬ ì•±ì„ ì¸ì¦í•˜ê³  DBMSì—ì„œ ì»¤ë„¥ì…˜ì„ ì–»ëŠ”ë° í•„ìš”í•œ ìê²© ì¦ëª…ì„ ì •ì˜
- `spring.sql.init.mode=always` ë¡œ ì„¤ì •í•˜ì—¬ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ schema.sql íŒŒì¼ë¡œ êµ¬ë§¤ í…Œì´ë¸”ì„ ìƒì„±í•˜ë„ë¡ ì§€ì‹œ
  - H2 ë°ì´í„°ë² ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ schema.sqlì˜ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì„¤ì •ì´ ë¶ˆí•„ìš”

##### 12.2ì—ì„œ êµ¬í˜„í•œ ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
![img.png](./img/12_3_1.png)
- MySQLì— ì˜ ì €ì¥ëœ ê²ƒì„ í™•ì¸

![img.png](./img/12_3_2.png)
- Get /purchaseë¡œ MySQLì— ì €ì¥ëœ ì •ë³´ ì¡°íšŒ

### 12.3.2 ì‚¬ìš©ì ì •ì˜ DataSource ë¹ˆ ì‚¬ìš©
- ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” application.properties ê¸°ë°˜ìœ¼ë¡œ DataSource ë¹ˆì„ ìë™ ìƒì„±
- í•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš° ì§ì ‘ DataSource ë¹ˆì„ ì •ì˜í•´ì•¼ í•¨
  - ëŸ°íƒ€ì„ ì¡°ê±´ì— ë”°ë¼ íŠ¹ì • DataSource êµ¬í˜„ ì‚¬ìš©
  - ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹œ ë°ì´í„° ì†ŒìŠ¤ êµ¬ë¶„ í•„ìš”
  - ëŸ°íƒ€ì„ì—ë§Œ ì•Œ ìˆ˜ ìˆëŠ” ì¡°ê±´ìœ¼ë¡œ DataSource ë§¤ê°œë³€ìˆ˜ êµ¬ì„±
  - ìŠ¤í”„ë§ ë¶€íŠ¸ ì—†ì´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë§Œ ì‚¬ìš©

##### application.properties íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì»¤ë„¥ì…˜ í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€
```yml
custom.datasource.url=jdbc:mysql://localhost/spring_textbook
custom.datasource.username=root
custom.datasource.password=1234
```
- í”„ë¡œí¼í‹° ì´ë¦„ì— `custom`ì´ë¼ëŠ” ë‹¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê³ ìœ  í”„ë¡œí¼í‹°ê°€ ì•„ë‹˜ì„ ê°•ì¡°
##### êµ¬ì„± í´ë˜ìŠ¤ì™€ @Bean ë©”ì„œë“œ ì •ì˜
```java

@Configuration
public class ProjectConfig {

  @Value("${custom.datasource.url}")
  private String datasourceUrl;

  @Value("${custom.datasource.username}")
  private String datasourceUsername;

  @Value("${custom.datasource.password}")
  private String datasourcePassword;

  @Bean
  public DataSource dataSource() {
    HikariDataSource dataSource = new HikariDataSource(); // ë°ì´í„° ì†ŒìŠ¤ êµ¬í˜„ì²´ë¡œ HikariCPë¥¼ ì‚¬ìš©
    dataSource.setJdbcUrl(datasourceUrl);
    dataSource.setUsername(datasourceUsername);
    dataSource.setPassword(datasourcePassword);
    dataSource.setConnectionTimeout(1000);
    return dataSource;
  }
}
```
### ğŸ™‹ ë©´ì ‘ ì˜ˆìƒ ì§ˆë¬¸
- H2 ë°ì´í„°ë² ì´ìŠ¤ì™€ MySQLì„ ì—°ê²°í•  ë•Œ ì„¤ì •ì˜ ì°¨ì´ì ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”.